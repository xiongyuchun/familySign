{"version":3,"sources":["webpack:///D:/sign/familySign/pages/im/conversations.vue?a8ee","webpack:///D:/sign/familySign/pages/im/conversations.vue?a79d","webpack:///D:/sign/familySign/pages/im/conversations.vue?236d","webpack:///D:/sign/familySign/pages/im/conversations.vue?52f7","uni-app:///pages/im/conversations.vue","webpack:///D:/sign/familySign/pages/im/conversations.vue?7ee1","webpack:///D:/sign/familySign/pages/im/conversations.vue?d95a","uni-app:///main.js"],"names":["name","computed","userType","data","conversations","actionPopup","conversation","visible","currentUser","onShow","mounted","beforeDestroy","GoEasy","methods","init","uni","console","url","gotoSign","formatDate","connectGoEasy","id","avatar","onSuccess","onFailed","content","onProgress","initGoEasyListeners","onRing","loadConversations","renderConversations","setUnreadAmount","index","text","subscribeGroup","groupIds","topConversation","top","title","icon","deleteConversation","success","chat","showAction","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AACqM;AACrM,gBAAgB,8MAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAAuwB,CAAgB,4xBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC8D3xB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;AAEA;AACA;AAAA,eACA;EACAA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MAEAC;QACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACAC;MACAC;MACA;MACAC;MACA;QACAD;UACAE;QACA;QACA;MACA;MACAD;MACA;QACA;QACA;MACA;;MACA;MACA;IACA;IACAE;MACA;IACA;IACAC;IACAC;MACAL;MACAH;QACAS;QACAlB;UACAH;UACAsB;QACA;QACAC;UACAP;QACA;QACAQ;UACAR,+EACAS;QACA;QACAC;UACAV;QACA;MACA;IACA;IACAW;MACAf;MACAA;IAIA;IACAgB;MACA;MACA;QACAb;UACAE;QACA;MACA;QACAF;UACAE;QACA;MACA;IACA;IAEA;IACAY;MAAA;MACAjB;QACAW;UACAR;UACA;UACA;UACA;QACA;QACAS;UACAT;UACAC;QACA;MACA;IACA;IACAc;MACAd;MACA;IACA;IACAe;MACA;MACAf;MACA;QACAD;UACAiB;UACAC;QACA;MACA;QACAlB;UACAiB;QACA;MACA;IAYA;IACAE;MACA;MACA;QAAA;MAAA;MACAtB;QACAuB;QACAZ;UACAP;QACA;QACAQ;UACAR;QACA;MACA;IACA;IACAoB;MAAA;MACA;MACA;MACA;MACAxB;QACAN;QACA+B;QACAd;UACAR;YACAuB;YACAC;UACA;QACA;QACAf;UACAR;QACA;MACA;IACA;IACAwB;MAAA;MACAzB;QACAU;QACAgB;UACA;YACA;YACA;YACA7B;cACAN;cACAiB;gBACAP;cACA;cACAQ;gBACAR;cACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA0B;MACA;MACA;QACArB;QACArB;QACAsB;MACA;MACA;IACA;IACAqB;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9QA;AAAA;AAAA;AAAA;AAAylC,CAAgB,mlCAAG,EAAC,C;;;;;;;;;;;ACA7mC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAE2D;AAC3D;AACA;AAHA;AACAC,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C","file":"pages/im/conversations.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./conversations.vue?vue&type=template&id=15b7189e&\"\nvar renderjs\nimport script from \"./conversations.vue?vue&type=script&lang=js&\"\nexport * from \"./conversations.vue?vue&type=script&lang=js&\"\nimport style0 from \"./conversations.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/im/conversations.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./conversations.vue?vue&type=template&id=15b7189e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.conversations.length\n  var l0 =\n    g0 > 0\n      ? _vm.__map(_vm.conversations, function (conversation, key) {\n          var $orig = _vm.__get_orig(conversation)\n          var m0 = _vm.formatDate(conversation.lastMessage.timestamp)\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.actionPopup.visible = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./conversations.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./conversations.vue?vue&type=script&lang=js&\"","<template>\r\n\t<scroll-view class=\"conversations\" scroll-y=\"true\">\r\n\t\t<view v-if=\"conversations.length > 0\">\r\n\t\t\t<view class=\"scroll-item\" v-for=\"(conversation, key) in conversations\" :key=\"key\">\r\n\t\t\t\t<view class=\"item-head\">\r\n\t\t\t\t\t<image :src=\"conversation.data.avatar\" class=\"head-icon\"></image>\r\n\t\t\t\t\t<view class=\"item-head_unread\" v-if=\"conversation.unread\">{{ conversation.unread }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"scroll-item_info\" @click=\"chat(conversation)\">\r\n\t\t\t\t\t<view class=\"item-info-top\">\r\n\t\t\t\t\t\t<text class=\"item-info-top_name\">{{ conversation.data.name }}</text>\r\n\t\t\t\t\t\t<view class=\"item-info-top_time\">{{ formatDate(conversation.lastMessage.timestamp) }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-info-bottom\">\r\n\t\t\t\t\t\t<view class=\"item-info-bottom-item\">\r\n\t\t\t\t\t\t\t<view class=\"item-info-top_content\" v-if=\"!conversation.lastMessage.recalled\">\r\n\t\t\t\t\t\t\t\t<text class=\"unread-text\">\r\n\t\t\t\t\t\t\t\t\t{{ conversation.lastMessage.read === false && conversation.lastMessage.senderId === currentUser.id ? '[未读]' : '' }}\r\n\t\t\t\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t\t\t\t<text v-if=\"conversation.lastMessage.senderId === currentUser.id\">我: </text>\r\n\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\tv-else>{{ conversation.type === 'group' ? conversation.lastMessage.senderData.name : conversation.data.name }}:\r\n\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\tv-if=\"conversation.lastMessage.type === 'text'\">{{ conversation.lastMessage.payload.text }}</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"conversation.lastMessage.type === 'video'\">[视频消息]</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"conversation.lastMessage.type === 'audio'\">[语音消息]</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"conversation.lastMessage.type === 'image'\">[图片消息]</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"conversation.lastMessage.type === 'file'\">[文件消息]</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"conversation.lastMessage.type === 'order'\">[自定义消息:订单]</text>\r\n\t\t\t\t\t\t\t\t<text v-else>[[未识别内容]]</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"item-info-top_content\" v-else>\r\n\t\t\t\t\t\t\t\t<text>\r\n\t\t\t\t\t\t\t\t\t{{conversation.lastMessage.recaller.id === currentUser.id ? '你' : conversation.lastMessage.recaller.data.name}}撤回了一条消息\r\n\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"item-info-bottom_action\" @click.stop=\"showAction(conversation)\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"no-conversation\" v-else>\r\n\t\t\t<!-- 当前没有会话 -->\r\n\t\t\t<!-- <p v-if=\"userType === 'user'\" class=\"sign-button\" @click=\"gotoSign\">去签约</p> -->\r\n\t\t\t<text>当前没有消息</text>\r\n\t\t</view>\r\n\t\t<view class=\"action-container\" v-if=\"actionPopup.visible\">\r\n\t\t\t<view class=\"layer\" @click=\"actionPopup.visible = false\"></view>\r\n\t\t\t<view class=\"action-box\">\r\n\t\t\t\t<view class=\"action-item\" @click=\"topConversation\">\r\n\t\t\t\t\t{{ actionPopup.conversation.top ? '取消置顶' : '置顶聊天' }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action-item\" @click=\"deleteConversation\">删除聊天</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</scroll-view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tformatDate\r\n\t} from '@/lib/utils.js';\r\n\t// import restApi from '../lib/restapi';\r\n\r\n\tconst GoEasy = uni.$GoEasy;\r\n\t// const GRTC = uni.$GRTC;\r\n\texport default {\r\n\t\tname: 'conversation',\r\n\t\tcomputed: {\r\n\t\t\tuserType() {\r\n\t\t\t\treturn this.$store.getters.userType\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tconversations: [],\r\n\r\n\t\t\t\tactionPopup: {\r\n\t\t\t\t\tconversation: null,\r\n\t\t\t\t\tvisible: false\r\n\t\t\t\t},\r\n\t\t\t\tcurrentUser: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tGoEasy.im.off(GoEasy.IM_EVENT.CONVERSATIONS_UPDATED, this.renderConversations);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit() {\r\n\t\t\t\tuni.$currentUser = uni.getStorageSync('currentUser');\r\n\t\t\t\tthis.currentUser = uni.$currentUser;\r\n\t\t\t\tconsole.log('currentUser:', this.currentUser);\r\n\t\t\t\tif (!this.currentUser) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: './login'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('GoEasy.getConnectionStatus():', GoEasy.getConnectionStatus())\r\n\t\t\t\tif (GoEasy.getConnectionStatus() === 'disconnected') {\r\n\t\t\t\t\tthis.connectGoEasy(); //连接goeasy\r\n\t\t\t\t\t// this.subscribeGroup(); //建立连接后，就应该订阅群聊消息，避免漏掉\r\n\t\t\t\t}\r\n\t\t\t\tthis.loadConversations(); //加载会话列表\r\n\t\t\t\tthis.initGoEasyListeners();\r\n\t\t\t},\r\n\t\t\tgotoSign() {\r\n\t\t\t\tthis.$U.gotoPage('/pages/sub-packages-user/my/doctor-introduction/index');\r\n\t\t\t},\r\n\t\t\tformatDate,\r\n\t\t\tconnectGoEasy() {\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tGoEasy.connect({\r\n\t\t\t\t\tid: this.currentUser.id,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tname: this.currentUser.name,\r\n\t\t\t\t\t\tavatar: this.currentUser.avatar\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonSuccess: () => {\r\n\t\t\t\t\t\tconsole.log('GoEasy connect successfully.')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFailed: (error) => {\r\n\t\t\t\t\t\tconsole.log('Failed to connect GoEasy, code:' + error.code + ',error:' + error\r\n\t\t\t\t\t\t.content);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonProgress: (attempts) => {\r\n\t\t\t\t\t\tconsole.log('GoEasy is connecting', attempts);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinitGoEasyListeners() {\r\n\t\t\t\tGoEasy.im.on(GoEasy.IM_EVENT.CONVERSATIONS_UPDATED, this.renderConversations); //监听会话列表变化\r\n\t\t\t\tGoEasy.im.on(GoEasy.IM_EVENT.CONVERSATIONS_UPDATED, this.setUnreadAmount); // 设置角标\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t// GRTC.on(GRTC.EVENT.RING, this.onRing); //监听来电事件\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tonRing() {\r\n\t\t\t\tconst currentCall = GRTC.currentCall();\r\n\t\t\t\tif (currentCall.groupId) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `./rtc/group/ring`,\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `./rtc/private/ring`,\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 加载最新的会话列表\r\n\t\t\tloadConversations() {\r\n\t\t\t\tGoEasy.im.latestConversations({\r\n\t\t\t\t\tonSuccess: (result) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tlet content = result.content;\r\n\t\t\t\t\t\tthis.renderConversations(content);\r\n\t\t\t\t\t\tthis.setUnreadAmount(content);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFailed: (error) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log('获取最新会话列表失败, error:', error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trenderConversations(content) {\r\n\t\t\t\tconsole.log('content:', content)\r\n\t\t\t\tthis.conversations = content.conversations;\r\n\t\t\t},\r\n\t\t\tsetUnreadAmount(content) {\r\n\t\t\t\tconst unreadTotal = content.unreadTotal;\r\n\t\t\t\tconsole.log('unreadTotal：',unreadTotal)\r\n\t\t\t\tif (unreadTotal > 0) {\r\n\t\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\t\tindex: 1,\r\n\t\t\t\t\t\ttext: unreadTotal.toString()\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.removeTabBarBadge({\r\n\t\t\t\t\t\tindex: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tGoEasy.setBadge({\r\n\t\t\t\t\tbadge: unreadTotal,\r\n\t\t\t\t\tonSuccess: function() {\r\n\t\t\t\t\t\tconsole.log(\"setBadge successfully.\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFailed: function(error) {\r\n\t\t\t\t\t\tconsole.log(\"Failed to setBadge,error:\" + error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tsubscribeGroup() {\r\n\t\t\t\tlet groups = restApi.findGroups(this.currentUser);\r\n\t\t\t\tlet groupIds = groups.map(item => item.id);\r\n\t\t\t\tGoEasy.im.subscribeGroup({\r\n\t\t\t\t\tgroupIds: groupIds,\r\n\t\t\t\t\tonSuccess: function() {\r\n\t\t\t\t\t\tconsole.log('订阅群消息成功');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFailed: function(error) {\r\n\t\t\t\t\t\tconsole.log('订阅群消息失败:', error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttopConversation() { //会话置顶\r\n\t\t\t\tthis.actionPopup.visible = false;\r\n\t\t\t\tlet conversation = this.actionPopup.conversation;\r\n\t\t\t\tlet description = conversation.top ? '取消置顶' : '置顶';\r\n\t\t\t\tGoEasy.im.topConversation({\r\n\t\t\t\t\tconversation: conversation,\r\n\t\t\t\t\ttop: !conversation.top,\r\n\t\t\t\t\tonSuccess: function() {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: description + '成功',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonFailed: function(error) {\r\n\t\t\t\t\t\tconsole.log(description, '失败：', error);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdeleteConversation() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '确认删除这条会话吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tlet conversation = this.actionPopup.conversation;\r\n\t\t\t\t\t\t\tthis.actionPopup.visible = false;\r\n\t\t\t\t\t\t\tGoEasy.im.removeConversation({\r\n\t\t\t\t\t\t\t\tconversation: conversation,\r\n\t\t\t\t\t\t\t\tonSuccess: function() {\r\n\t\t\t\t\t\t\t\t\tconsole.log('删除会话成功');\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonFailed: function(error) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.actionPopup.visible = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchat(conversation) {\r\n\t\t\t\t// console.log('conversation:', conversation)\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tid: conversation.userId,\r\n\t\t\t\t\tname: conversation.data.name,\r\n\t\t\t\t\tavatar: conversation.data.avatar\r\n\t\t\t\t}\r\n\t\t\t\tthis.$U.gotoPage(`/pages/im/privateChat?to=${JSON.stringify(obj)}`)\r\n\t\t\t},\r\n\t\t\tshowAction(conversation) {\r\n\t\t\t\tthis.actionPopup.conversation = conversation;\r\n\t\t\t\tthis.actionPopup.visible = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage {\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.conversations {\r\n\t\twidth: 750rpx;\r\n\t\toverflow-x: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.sign-button {\r\n\t\twidth: 180px;\r\n\t\tpadding: 10px 40px;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #006eff;\r\n\t\tfont-size: 16px;\r\n\t\tmargin-top: 65px;\r\n\t\tborder-radius: 30px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.conversations .scroll-item {\r\n\t\theight: 152rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding-left: 32rpx;\r\n\t}\r\n\r\n\t.conversations .scroll-item .head-icon {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tmargin-right: 28rpx;\r\n\t}\r\n\r\n\t.conversations .scroll-item_info {\r\n\t\theight: 151rpx;\r\n\t\twidth: 590rpx;\r\n\t\tpadding-right: 32rpx;\r\n\t\tborder-bottom: 1px solid #EFEFEF;\r\n\t}\r\n\r\n\t.conversations .scroll-item_info .item-info-top {\r\n\t\tpadding-top: 20rpx;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\r\n\t}\r\n\r\n\t.conversations .item-info-top_name {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #262628;\r\n\t}\r\n\r\n\t.conversations .item-info-top_time {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: rgba(179, 179, 179, 0.8);\r\n\t}\r\n\r\n\t.conversations .item-info-bottom {\r\n\t\theight: 40rpx;\r\n\t\tline-height: 40rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.conversations .item-info-bottom-item {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.item-info-bottom .item-info-top_content {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #b3b3b3;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\r\n\t}\r\n\r\n\t.item-info-bottom .item-info-bottom_action {\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t\tfont-size: 34rpx;\r\n\t\tbackground: url(\"http://182.61.31.42:1001/static/images/action.png\") no-repeat center;\r\n\t\tbackground-size: 28rpx 30rpx;\r\n\t}\r\n\r\n\t.no-conversation {\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #9D9D9D;\r\n\t}\r\n\r\n\t.item-head {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.item-head .item-head_unread {\r\n\t\tpadding: 6rpx;\r\n\t\tbackground-color: #EE593C;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 34rpx;\r\n\t\tline-height: 28rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t\tmin-width: 24rpx;\r\n\t\tmin-height: 24rpx;\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 15rpx;\r\n\t}\r\n\r\n\t.action-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.action-container .layer {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbackground: rgba(51, 51, 51, 0.5);\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tz-index: 99;\r\n\t}\r\n\r\n\t.action-box {\r\n\t\twidth: 400rpx;\r\n\t\theight: 240rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tposition: relative;\r\n\t\tz-index: 100;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.action-item {\r\n\t\ttext-align: center;\r\n\t\tline-height: 120rpx;\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #262628;\r\n\t\tborder-bottom: 1px solid #EFEFEF;\r\n\t}\r\n\r\n\t.unread-text {\r\n\t\tcolor: #d02129;\r\n\t}\r\n</style>","import mod from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./conversations.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./conversations.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1717509031047\n      var cssReload = require(\"E:/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-cloud-stat.es.js';\nimport Vue from 'vue'\nimport Page from './pages/im/conversations.vue'\ncreatePage(Page)"],"sourceRoot":""}