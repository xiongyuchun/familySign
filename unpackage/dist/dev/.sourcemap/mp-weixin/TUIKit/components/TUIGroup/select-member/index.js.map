{"version":3,"sources":["webpack:///D:/sign/familySign/TUIKit/components/TUIGroup/select-member/index.vue?7a0b","webpack:///D:/sign/familySign/TUIKit/components/TUIGroup/select-member/index.vue?0240","webpack:///D:/sign/familySign/TUIKit/components/TUIGroup/select-member/index.vue?b28f","webpack:///D:/sign/familySign/TUIKit/components/TUIGroup/select-member/index.vue?13e2","uni-app:///TUIKit/components/TUIGroup/select-member/index.vue?vue&type=script&lang=ts&"],"names":["__sfc_main","setup","__props","__ctx","TUIContactServer","Server","getInstance","TUIConstants","constants","needSearch","memberList","userList","group","selectOptions","groupID","isRadio","isNeedSearch","title","filterUserIDList","TUISearchServer","generateSearchServer","value","TUICore","getService","TUISearch","SERVICE","NAME","console","warn","params","getOnCallParams","TUIContact","METHOD","SELECT_FRIEND","TUIStore","watch","StoreName","GRP","currentGroup","data","currentGroupMemberList","List","map","item","indexOf","userID","isDisabled","getMember","options","count","offset","length","TUIGroupService","getGroupMemberList","handleSelectedResult","update","callback","getOnCallCallback","TUIGroup","SELECT_GROUP_MEMBER","searchFail","message","TUITranslateService","t","type","TOAST_TYPE","ERROR","handleSearch","val","searchGroupMember","imResponse","searchAllResult","filter","components","Object","assign","SelectUser"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACqM;AACrM,gBAAgB,8MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA49B,CAAgB,29BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACYh/B;AACA;AACA;AACA;AAEA;AAA+B;EAAA;IAAA;EAAA;AAAA;AAC/B,IAAMA,UAAU,GAAG,EAAE;AACrBA,UAAU,CAACC,KAAK,GAAG,UAACC,OAAO,EAAEC,KAAK,EAAI;EACpC,IAAMC,gBAAgB,GAAGC,eAAM,CAACC,WAAW,EAAE;EAC7C,IAAMC,YAAY,GAAGH,gBAAgB,CAACI,SAAS;EAC/C,IAAMC,UAAU,GAAG,mBAAG,EAAC,KAAK,CAAC;EAC7B,IAAMC,UAAU,GAAG,mBAAG,EAA6B,EAAE,CAAC;EACtD,IAAMC,QAAQ,GAAG,mBAAG,EAA6B,EAAE,CAAC;EACpD,IAAMC,KAAK,GAAG,mBAAG,EAAc,EAAE,CAAC;EAClC,IAAMC,aAAa,GAAQ,mBAAG,EAAC;IAC7BC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,KAAK;IACdC,YAAY,EAAE,KAAK;IACnBC,KAAK,EAAE,EAAE;IACTC,gBAAgB,EAAG;GACpB,CAAC;EACF,IAAMC,eAAe,GAAG,mBAAG,EAAM,IAAI,CAAC;EACtC,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAIJ,YAAiB,EAAI;IACjDG,eAAe,CAACE,KAAK,GAAGC,gBAAO,CAACC,UAAU,CAAChB,YAAY,CAACiB,SAAS,CAACC,OAAO,CAACC,IAAI,CAAC;IAC/E,IAAIP,eAAe,CAACE,KAAK,EAAE;MACzBZ,UAAU,CAACY,KAAK,GAAGL,YAAY;KAChC,MAAM;MACLW,OAAO,CAACC,IAAI,CAAC,kBAAkB,CAAC;;EAEpC,CAAC;EACD,2BAAW,EAAC,YAAK;IACf,IAAMC,MAAM,GAAGzB,gBAAgB,CAAC0B,eAAe,CAACvB,YAAY,CAACwB,UAAU,CAACN,OAAO,CAACO,MAAM,CAACC,aAAa,CAAC;IACrGpB,aAAa,CAACQ,KAAK,CAACP,OAAO,GAAGe,MAAM,CAACf,OAAO;IAC5CD,aAAa,CAACQ,KAAK,CAACJ,KAAK,GAAGY,MAAM,CAACZ,KAAK;IACxCJ,aAAa,CAACQ,KAAK,CAACN,OAAO,GAAGc,MAAM,CAACd,OAAO;IAC5CF,aAAa,CAACQ,KAAK,CAACL,YAAY,GAAGa,MAAM,CAACb,YAAY;IACtDH,aAAa,CAACQ,KAAK,CAACH,gBAAgB,GAAGW,MAAM,CAACX,gBAAgB;IAC9D,IAAIW,MAAM,CAACb,YAAY,EAAE;MACvBI,oBAAoB,CAACS,MAAM,CAACb,YAAY,CAAC;;EAE7C,CAAC,CAAC;EACFkB,yBAAQ,CAACC,KAAK,CAACC,0BAAS,CAACC,GAAG,EAAE;IAC5BC,YAAY,EAAE,sBAACC,IAAiB,EAAI;MAClC3B,KAAK,CAACS,KAAK,GAAGkB,IAAI;IACpB,CAAC;IACDC,sBAAsB,EAAE,gCAACC,IAAgC,EAAI;MAC3D/B,UAAU,CAACW,KAAK,GAAGoB,IAAI,CAACC,GAAG,CAAC,UAACC,IAAyB,EAAI;QACxD,IAAI9B,aAAa,CAACQ,KAAK,CAACH,gBAAgB,CAAC0B,OAAO,CAACD,IAAI,CAACE,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;UAClEF,IAAI,CAACG,UAAU,GAAG,IAAI;;MAE1B,CAAC,CAAC;MACFnC,QAAQ,CAACU,KAAK,GAAGX,UAAU,CAACW,KAAK;IACnC;GACD,CAAC;EACF,IAAM0B,SAAS;IAAA,mFAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cACVjC,OAAO,GAAGF,KAAK,CAACS,KAAK,CAACP,OAAO;cAC7BkC,OAAO,GAAG;gBACdlC,OAAO,EAAPA,OAAO;gBACPmC,KAAK,EAAE,GAAG;gBACVC,MAAM,EAAExC,UAAU,CAACW,KAAK,CAAC8B;eAC1B;cAAA;cAAA,OACKC,gCAAe,CAACC,kBAAkB,CAACL,OAAO,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAClD;IAAA,gBARKD,SAAS;MAAA;IAAA;EAAA,GAQd;EACD,IAAMO,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAI5C,UAAsB,EAAI;IACtDwB,yBAAQ,CAACqB,MAAM,CAACnB,0BAAS,CAACC,GAAG,EAAE,uBAAuB,EAAE,KAAK,CAAC;IAC9D,IAAMmB,QAAQ,GAAGpD,gBAAgB,CAACqD,iBAAiB,CAAClD,YAAY,CAACmD,QAAQ,CAACjC,OAAO,CAACO,MAAM,CAAC2B,mBAAmB,CAAC;IAC7GH,QAAQ,IAAIA,QAAQ,CAAC9C,UAAU,CAAC;EAClC,CAAC;EACD,IAAMkD,UAAU,GAAG,SAAbA,UAAU,GAAQ;IACtB,gBAAK,EAAC;MACJC,OAAO,EAAEC,oCAAmB,CAACC,CAAC,CAAC,iBAAiB,CAAC;MACjDC,IAAI,EAAEC,iBAAU,CAACC;KAClB,CAAC;IACFvD,QAAQ,CAACU,KAAK,oCAAOX,UAAU,CAACW,KAAK,CAAC;EACxC,CAAC;EACD,IAAM8C,YAAY;IAAA,oFAAG,kBAAOC,GAAW;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,IAChCA,GAAG;gBAAA;gBAAA;cAAA;cAAA,kCACCzD,QAAQ,CAACU,KAAK,GAAGX,UAAU,CAACW,KAAK;YAAA;cAAA;cAAA;cAAA,OAGVF,eAAe,CAACE,KAAK,CAACgD,iBAAiB,CAACD,GAAG,CAAC;YAAA;cAApEE,UAAU;cAAA,IACXA,UAAU,CAAC/B,IAAI,CAAC,CAAC,CAAC;gBAAA;gBAAA;cAAA;cAAA,kCACdqB,UAAU,EAAE;YAAA;cAErBjD,QAAQ,CAACU,KAAK,GAAGiD,UAAU,CAAC/B,IAAI;cAC1BgC,eAAe,GAAG7D,UAAU,CAACW,KAAK,CAACmD,MAAM,CAAC,UAAC7B,IAAS;gBAAA,OAAKA,IAAI,CAACE,MAAM,KAAKyB,UAAU,CAAC/B,IAAI,CAAC,CAAC,CAAC,CAACM,MAAM;cAAA,EAAC;cACzGnC,UAAU,CAACW,KAAK,GAAGkD,eAAe,CAACpB,MAAM,GAAGzC,UAAU,CAACW,KAAK,8CAAOX,UAAU,CAACW,KAAK,oCAAKV,QAAQ,CAACU,KAAK,EAAC;cAAC;cAAA;YAAA;cAAA;cAAA;cAAA,kCAEjGuC,UAAU,EAAE;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAEtB;IAAA,gBAfKO,YAAY;MAAA;IAAA;EAAA,GAejB;EACD,OAAO;IACLxD,QAAQ,EAARA,QAAQ;IACRC,KAAK,EAALA,KAAK;IACLC,aAAa,EAAbA,aAAa;IACbkC,SAAS,EAATA,SAAS;IACTO,oBAAoB,EAApBA,oBAAoB;IACpBa,YAAY,EAAZA;GACD;AACH,CAAC;AACDnE,UAAU,CAACyE,UAAU,GAAGC,MAAM,CAACC,MAAM,CAAC;EACpCC,UAAU,EAAVA;CACD,EAAE5E,UAAU,CAACyE,UAAU,CAAC;AAAC,eACXzE,UAAU;AAAA,2B","file":"TUIKit/components/TUIGroup/select-member/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=e9646a48&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"TUIKit/components/TUIGroup/select-member/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=template&id=e9646a48&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\ts-loader\\\\index.js??ref--14-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--14-2!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\ts-loader\\\\index.js??ref--14-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--14-2!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\nimport { TUIGroupService, TUIStore, StoreName, TUITranslateService, IGroupMember, IGroupModel } from \"@tencentcloud/chat-uikit-engine\";\nimport { ref, watchEffect } from \"../../../adapter-vue\";\nimport { Toast, TOAST_TYPE } from \"../../common/Toast/index\";\nimport TUICore from \"@tencentcloud/tui-core\";\nimport SelectUser from \"../../common/SelectUser/index.vue\";\nimport Server from \"../server\";\nconst __sfc_main = {};\n__sfc_main.setup = (__props, __ctx) => {\n  const TUIContactServer = Server.getInstance();\n  const TUIConstants = TUIContactServer.constants;\n  const needSearch = ref(false);\n  const memberList = ref<Array<typeof IGroupMember>>([]);\n  const userList = ref<Array<typeof IGroupMember>>([]);\n  const group = ref<IGroupModel>({});\n  const selectOptions: any = ref({\n    groupID: '',\n    isRadio: false,\n    isNeedSearch: false,\n    title: '',\n    filterUserIDList: ([] as Array<string>)\n  });\n  const TUISearchServer = ref<any>(null);\n  const generateSearchServer = (isNeedSearch: any) => {\n    TUISearchServer.value = TUICore.getService(TUIConstants.TUISearch.SERVICE.NAME);\n    if (TUISearchServer.value) {\n      needSearch.value = isNeedSearch;\n    } else {\n      console.warn('请添加 TUISearch 组件');\n    }\n  };\n  watchEffect(() => {\n    const params = TUIContactServer.getOnCallParams(TUIConstants.TUIContact.SERVICE.METHOD.SELECT_FRIEND);\n    selectOptions.value.groupID = params.groupID;\n    selectOptions.value.title = params.title;\n    selectOptions.value.isRadio = params.isRadio;\n    selectOptions.value.isNeedSearch = params.isNeedSearch;\n    selectOptions.value.filterUserIDList = params.filterUserIDList;\n    if (params.isNeedSearch) {\n      generateSearchServer(params.isNeedSearch);\n    }\n  });\n  TUIStore.watch(StoreName.GRP, {\n    currentGroup: (data: IGroupModel) => {\n      group.value = data;\n    },\n    currentGroupMemberList: (List: Array<typeof IGroupMember>) => {\n      memberList.value = List.map((item: typeof IGroupMember) => {\n        if (selectOptions.value.filterUserIDList.indexOf(item.userID) > -1) {\n          item.isDisabled = true;\n        }\n      });\n      userList.value = memberList.value;\n    }\n  });\n  const getMember = async () => {\n    const groupID = group.value.groupID;\n    const options = {\n      groupID,\n      count: 100,\n      offset: memberList.value.length\n    };\n    await TUIGroupService.getGroupMemberList(options);\n  };\n  const handleSelectedResult = (memberList: Array<any>) => {\n    TUIStore.update(StoreName.GRP, \"isShowSelectComponent\", false);\n    const callback = TUIContactServer.getOnCallCallback(TUIConstants.TUIGroup.SERVICE.METHOD.SELECT_GROUP_MEMBER);\n    callback && callback(memberList);\n  };\n  const searchFail = () => {\n    Toast({\n      message: TUITranslateService.t(\"TUIGroup.该用户不存在\"),\n      type: TOAST_TYPE.ERROR\n    });\n    userList.value = [...memberList.value];\n  };\n  const handleSearch = async (val: string) => {\n    if (!val) {\n      return userList.value = memberList.value;\n    }\n    try {\n      const imResponse: any = await TUISearchServer.value.searchGroupMember(val);\n      if (!imResponse.data[0]) {\n        return searchFail();\n      }\n      userList.value = imResponse.data;\n      const searchAllResult = memberList.value.filter((item: any) => item.userID === imResponse.data[0].userID);\n      memberList.value = searchAllResult.length ? memberList.value : [...memberList.value, ...userList.value];\n    } catch (error) {\n      return searchFail();\n    }\n  };\n  return {\n    userList,\n    group,\n    selectOptions,\n    getMember,\n    handleSelectedResult,\n    handleSearch\n  };\n};\n__sfc_main.components = Object.assign({\n  SelectUser\n}, __sfc_main.components);\nexport default __sfc_main;\n"],"sourceRoot":""}