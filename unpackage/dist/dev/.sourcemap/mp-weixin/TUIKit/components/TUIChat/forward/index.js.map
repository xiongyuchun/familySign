{"version":3,"sources":["webpack:///D:/sign/familySign/TUIKit/components/TUIChat/forward/index.vue?7e43","webpack:///D:/sign/familySign/TUIKit/components/TUIChat/forward/index.vue?a0b3","webpack:///D:/sign/familySign/TUIKit/components/TUIChat/forward/index.vue?37be","webpack:///D:/sign/familySign/TUIKit/components/TUIChat/forward/index.vue?fca7","uni-app:///TUIKit/components/TUIChat/forward/index.vue?vue&type=script&lang=ts&"],"names":["__sfc_main","setup","__props","__ctx","isShowForwardPanel","customConversationList","TUIStore","watch","StoreName","CONV","conversationList","list","value","map","userID","conversation","conversationID","nick","getShowName","avatar","getAvatar","CUSTOM","singleForwardMessageID","onSingleForwardMessageIDUpdated","update","undefined","unwatch","messageID","openForwardPanel","closeForwardPanel","finishSelected","selectedConvIDWrapperList","selectedConversationList","convIDWrapper","getConversationModel","getData","message","getMessageModel","TUIChatService","sendForwardMessage","needReadReceipt","catch","error","code","TUITranslateService","t","type","TOAST_TYPE","ERROR","onSubmit","convIDWrapperList","length","isUniFrameWork","components","Object","assign","Overlay","Transfer"],"mappings":"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","file":"TUIKit/components/TUIChat/forward/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=3808423a&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"TUIKit/components/TUIChat/forward/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=template&id=3808423a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.isShowForwardPanel\n    ? _vm.TUITranslateService.t(\"TUIChat.转发\")\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\ts-loader\\\\index.js??ref--14-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--14-2!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\ts-loader\\\\index.js??ref--14-1!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--14-2!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!../../../../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue2-script-setup!./index.vue?vue&type=script&lang=ts&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { onUnmounted, ref } from \"../../../adapter-vue\";\nimport { TUIStore, StoreName, TUIChatService, TUITranslateService, IConversationModel } from \"@tencentcloud/chat-uikit-engine\";\nimport Overlay from \"../../common/Overlay/index.vue\";\nimport Transfer from \"../../common/Transfer/index.vue\";\nimport { Toast, TOAST_TYPE } from \"../../../components/common/Toast\";\nimport { isPC, isUniFrameWork } from \"../../../utils/env\";\nimport { isEnabledMessageReadReceiptGlobal } from \"../utils/utils\";\nconst __sfc_main = {};\n__sfc_main.setup = (__props, __ctx) => {\n  const isShowForwardPanel = ref(false);\n  const customConversationList = ref();\n  TUIStore.watch(StoreName.CONV, {\n    conversationList: (list: IConversationModel[]) => {\n      customConversationList.value = list.map(conversation => {\n        return {\n          // 为了实现Transfer的复用，这里用userID代替ConversationID\n          userID: conversation.conversationID,\n          nick: conversation.getShowName(),\n          avatar: conversation.getAvatar()\n        };\n      });\n    }\n  });\n  TUIStore.watch(StoreName.CUSTOM, {\n    singleForwardMessageID: onSingleForwardMessageIDUpdated\n  });\n  onUnmounted(() => {\n    // 组件卸载时需要清掉数据 否则小程序会自动打开\n    TUIStore.update(StoreName.CUSTOM, 'singleForwardMessageID', undefined);\n    TUIStore.unwatch(StoreName.CUSTOM, {\n      singleForwardMessageID: onSingleForwardMessageIDUpdated\n    });\n  });\n  function onSingleForwardMessageIDUpdated(messageID: string) {\n    if (typeof messageID !== 'undefined') {\n      openForwardPanel();\n    }\n  }\n  function closeForwardPanel(): void {\n    // ! 必须通过close函数关闭转发面板 singleForwardMessage必须清掉\n    TUIStore.update(StoreName.CUSTOM, 'singleForwardMessageID', undefined);\n    isShowForwardPanel.value = false;\n  }\n  function openForwardPanel(): void {\n    isShowForwardPanel.value = true;\n  }\n  function finishSelected(selectedConvIDWrapperList: Array<{\n    userID: string;\n  }>): void {\n    /**\n     * 这里传递的是 coversationID\n     * 但为了实现 Transfer 的复用 这里用 userID 代替 ConversationID\n     */\n    const selectedConversationList = selectedConvIDWrapperList.map(convIDWrapper => {\n      const {\n        userID: conversationID\n      } = convIDWrapper;\n      return TUIStore.getConversationModel(conversationID);\n    });\n    const singleForwardMessageID: string = TUIStore.getData(StoreName.CUSTOM, \"singleForwardMessageID\");\n    const message = TUIStore.getMessageModel(singleForwardMessageID);\n    TUIChatService.sendForwardMessage(selectedConversationList, [message], ({\n      needReadReceipt: isEnabledMessageReadReceiptGlobal()\n    } as any)).catch((error: {\n      message: string;\n      code: number;\n    }) => {\n      if (error.code === 80001) {\n        Toast({\n          message: TUITranslateService.t(\"内容包含敏感词汇\"),\n          type: TOAST_TYPE.ERROR\n        });\n      } else {\n        Toast({\n          message: (error.message as string),\n          type: TOAST_TYPE.ERROR\n        });\n      }\n    });\n    closeForwardPanel();\n  }\n  function onSubmit(convIDWrapperList: Array<{\n    userID: string;\n  }>) {\n    if (convIDWrapperList?.length === 0) return;\n    finishSelected(convIDWrapperList);\n  }\n  return {\n    TUITranslateService,\n    isUniFrameWork,\n    isShowForwardPanel,\n    customConversationList,\n    closeForwardPanel,\n    onSubmit\n  };\n};\n__sfc_main.components = Object.assign({\n  Overlay,\n  Transfer\n}, __sfc_main.components);\nexport default __sfc_main;\n"],"sourceRoot":""}