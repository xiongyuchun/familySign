(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/msg/index"],{"0443":function(e,n,t){"use strict";t.r(n);var o=t("0479"),r=t("f56e");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("a493");var a=t("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"1e7694b5",null,!1,o["a"],void 0);n["default"]=u.exports},"0479":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement,n=(this._self._c,this.currentConversationID?this.TUITranslateService.t("TUIChat.您已被管理员禁言"):null),t=this.currentConversationID?this.TUITranslateService.t("TUIChat.请输入消息"):null;this.$mp.data=Object.assign({},{$root:{g0:n,g1:t}})},r=[]},"072c":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("2ab0"),r=t("a6ed"),i=t("be0f"),a=t("b2e8"),u=t("d31c"),c={};c.props={searchType:{key:"searchType",required:!1,type:null,default:function(){return u.isUniFrameWork?"conversation":"global"}}},c.setup=function(e,n){var t=e,c=(0,o.ref)(),l=(0,o.ref)(""),s=(0,o.ref)(!1),f=(0,o.ref)(!!u.isUniFrameWork),d=(0,o.computed)((function(){return!u.isPC&&("global"===t.searchType&&s.value||"conversation"===t.searchType&&f.value)})),v=function(e){r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchInputValue",{value:"",searchType:e}),r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchMessageType",{value:i.searchMessageTypeDefault[e],searchType:e}),r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchMessageTime",{value:a.searchMessageTimeDefault,searchType:e})};function h(){r.TUIStore.update(r.StoreName.CUSTOM,"isShowInConversationSearch",!1)}(0,o.onMounted)((function(){["global","conversation"].forEach((function(e){v(e)})),r.TUIStore.watch(r.StoreName.CONV,{currentConversationID:function(e){u.isUniFrameWork||l.value===e||h(),l.value=e}}),r.TUIStore.watch(r.StoreName.CUSTOM,{currentSearchingStatus:function(e){(null===e||void 0===e?void 0:e.searchType)===t.searchType&&(s.value=null===e||void 0===e?void 0:e.isSearching,"global"===(null===e||void 0===e?void 0:e.searchType)&&c.value&&(null!==e&&void 0!==e&&e.isSearching?T(c.value):I(c.value)))},isShowInConversationSearch:function(e){f.value=!!e,f.value&&v(t.searchType)}})})),(0,o.onBeforeUnmount)((function(){I(null===c||void 0===c?void 0:c.value)}));var m=!1,p=!1,T=function(e){!u.isUniFrameWork&&u.isPC&&(document.addEventListener("click",U),(null===e||void 0===e?void 0:e.addEventListener)&&(null===e||void 0===e||e.addEventListener("click",b)))},I=function(e){!u.isUniFrameWork&&u.isPC&&(document.removeEventListener("click",U),(null===e||void 0===e?void 0:e.removeEventListener)&&(null===e||void 0===e||e.removeEventListener("click",b)))},U=function(){m=!0,!p&&m&&(r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchingStatus",{isSearching:!1,searchType:t.searchType}),I(null===c||void 0===c?void 0:c.value)),m=!1,p=!1},b=function(){p=!0};return{isPC:u.isPC,globalSearchRef:c,searchingStatus:s,isShowInConversationSearch:f,isFullScreen:d,closeInConversationSearch:h}},c.components=Object.assign({SearchInput:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-input/index")]).then(function(){return resolve(t("9607"))}.bind(null,t)).catch(t.oe)},SearchMore:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-more/index")]).then(function(){return resolve(t("7b75"))}.bind(null,t)).catch(t.oe)},SearchContainer:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-container/index")]).then(function(){return resolve(t("40a5"))}.bind(null,t)).catch(t.oe)},SearchResult:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-result/index")]).then(function(){return resolve(t("eef1"))}.bind(null,t)).catch(t.oe)}},c.components);var l=c;n.default=l},"0a39":function(e,n,t){},1113:function(e,n,t){"use strict";t.r(n);var o=t("32e4"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},"130f":function(e,n,t){"use strict";var o=t("4ea4"),r=t("7037");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=f(t("a6ed")),a=f(t("e16a")),u=t("2ab0"),c=t("d31c"),l=o(t("0f88"));function s(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:n})(e)}function f(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=s(n);if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}var d={setup:function(e,n){var t=n.emit,o=(0,u.ref)(!c.isUniFrameWork),r=(0,u.ref)(),s=(0,u.ref)(),f=(0,u.ref)(!1),d=(0,u.ref)(""),v=(0,u.ref)(void 0);i.TUIStore.watch(i.StoreName.CONV,{currentConversation:function(e){var n,t;if(s.value!==(null===e||void 0===e?void 0:e.conversationID)){if(l.default.setChatType(null===e||void 0===e?void 0:e.type),a.default.callService({serviceName:a.TUIConstants.TUICustomerServicePlugin.SERVICE.NAME,method:a.TUIConstants.TUICustomerServicePlugin.SERVICE.METHOD.ACTIVE_CONVERSATION,params:{conversationID:null===e||void 0===e?void 0:e.conversationID}}),s.value=null===e||void 0===e?void 0:e.conversationID,f.value=(null===e||void 0===e?void 0:e.type)===i.default.TYPES.CONV_GROUP,c.isUniFrameWork&&f.value&&d.value!==(null===e||void 0===e||null===(n=e.groupProfile)||void 0===n?void 0:n.groupID)){var o=a.default.getExtensionList(a.TUIConstants.TUIChat.EXTENSION.CHAT_HEADER.EXT_ID,{filterManageGroup:!f.value});v.value=o[0]}c.isUniFrameWork&&!f.value&&(v.value=[]),d.value=null===e||void 0===e||null===(t=e.groupProfile)||void 0===t?void 0:t.groupID}}}),(0,u.onUnmounted)((function(){h()}));var h=function(){i.TUIConversationService.switchConversation()};return{TUITranslateService:i.TUITranslateService,isPC:c.isPC,isWeChat:c.isWeChat,isUniFrameWork:c.isUniFrameWork,isToolbarShow:o,messageInputRef:r,currentConversationID:s,isGroup:f,groupID:d,groupManageExt:v,closeChat:function(e){t("closeChat",e),h()},insertEmoji:function(e){var n;null===r||void 0===r||null===(n=r.value)||void 0===n||n.insertEmoji(e)},handleToolbarListShow:function(e){c.isUniFrameWork?o.value=void 0===e?!o.value:e:o.value=!0},handleEditor:function(e,n){var t;if(e&&n)switch(n){case"reference":break;case"reply":break;case"reedit":var o,i;if(null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.text)null===r||void 0===r||null===(o=r.value)||void 0===o||o.reEdit(null===e||void 0===e||null===(i=e.payload)||void 0===i?void 0:i.text);break;default:break}},handleGroup:function(){v.value.listener.onClicked({groupID:d.value})}}}};d.components=Object.assign({ChatHeader:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/components/TUIChat/chat-header/index")]).then(function(){return resolve(t("59ca"))}.bind(null,t)).catch(t.oe)},Forward:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIChat/forward/index")]).then(function(){return resolve(t("8492"))}.bind(null,t)).catch(t.oe)},MessageList:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIChat/message-list/index")]).then(function(){return resolve(t("309f"))}.bind(null,t)).catch(t.oe)},MessageInputToolbar:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/components/TUIChat/message-input-toolbar/index")]).then(function(){return resolve(t("9aff"))}.bind(null,t)).catch(t.oe)},MessageInput:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIChat/message-input/index")]).then(function(){return resolve(t("4e72"))}.bind(null,t)).catch(t.oe)}},d.components);var v=d;n.default=v},"1d1d":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},"23da":function(e,n,t){"use strict";t.r(n);var o=t("51b0"),r=t("ca4d");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("ff0d");var a=t("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"533de489",null,!1,o["a"],void 0);n["default"]=u.exports},"32e4":function(e,n,t){"use strict";(function(e){var o=t("7037");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("3d07"),i=t("e16a");(function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=a(n);if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=i?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(r,u,c):r[u]=e[u]}r.default=e,t&&t.set(e,r)})(t("a6ed"));function a(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:n})(e)}var u={computed:{userType:function(){return this.$store.getters.userType}},data:function(){return{}},mounted:function(){this.login()},methods:{login:function(){if(r.TUIChatKit){r.TUIChatKit.init(),e.showLoading({title:"加载中"});var n="";console.log("this.userType:","user"===this.userType),"user"===this.userType?(console.log("this.$store.getters.userInfo:",this.$store.getters.userInfo),n=this.$store.getters.userInfo.UserId):(console.log("this.$store.getters.userInfoDoctor:",this.$store.getters.userInfoDoctor),n=this.$store.getters.userInfoDoctor.DoctorId),e.$chat_userSig=(0,r.genTestUserSig)({userID:n,SDKAppID:e.$chat_SDKAppID,secretKey:e.$chat_secretKey}).userSig;i.TUILogin.login({SDKAppID:e.$chat_SDKAppID,userID:n,userSig:e.$chat_userSig,useUploadPlugin:!0,useProfanityFilterPlugin:!1,framework:"vue2"}).then((function(){e.hideLoading()})),e.hideLoading()}},gotoSign:function(){this.$U.gotoPage("/pages/sub-packages-user/my/doctor-introduction/index")},openConversation:function(){e.navigateTo({url:"/TUIKit/components/TUIConversation/index"})},openContact:function(){e.navigateTo({url:"/TUIKit/components/TUIContact/index"})}}};n.default=u}).call(this,t("543d")["default"])},"35ea":function(e,n,t){"use strict";t.r(n);var o=t("072c"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},"3f14":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},"45d9":function(e,n,t){"use strict";t.r(n);var o=t("7118"),r=t("8b80");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("a460");var a=t("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"e77f70cc",null,!1,o["a"],void 0);n["default"]=u.exports},"51b0":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},5547:function(e,n,t){"use strict";t.r(n);var o=t("b40f"),r=t("1113");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("813e");var a=t("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"073d9ca8",null,!1,o["a"],void 0);n["default"]=u.exports},7118:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},"717a":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("405a");var o=t("a6ed"),r=t("2ab0"),i=t("8e85"),a=t("e6e8"),u={setup:function(e,n){var t=n.emit,u=(0,r.ref)(0),c=(0,r.ref)(),l=(0,r.ref)(),s=(0,r.ref)(0),f=(0,r.ref)(0),d=(0,r.ref)(!0);o.TUIStore.watch(o.StoreName.CONV,{totalUnreadCount:function(e){u.value=e}}),o.TUIStore.watch(o.StoreName.CUSTOM,{isShowConversationHeader:function(e){d.value=!1!==e}});var v=function(){var e,n;null===c||void 0===c||null===(e=c.value)||void 0===e||e.closeChildren(),null===l||void 0===l||null===(n=l.value)||void 0===n||n.closeChildren()};(0,a.onHide)(v);return{conversationListDomRef:l,handleSwitchConversation:function(e){null===i.TUIGlobal||void 0===i.TUIGlobal||i.TUIGlobal.navigateTo({url:"/TUIKit/components/TUIChat/index"}),t("handleSwitchConversation",e)},handleClickConv:function(){v()},handleTouchStart:function(e){s.value=e.changedTouches[0].clientX,f.value=e.changedTouches[0].clientY},handleTouchEnd:function(e){var n=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,o="";n-s.value>50&&Math.abs(t-f.value)<50?o="right":n-s.value<-50&&Math.abs(t-f.value)<50&&(o="left"),t-f.value>50&&Math.abs(n-s.value)<50?o="down":t-f.value<-50&&Math.abs(n-s.value)<50&&(o="up"),"down"!==o&&"up"!==o||v()},getPassingRef:function(e){e.value=l.value}}}};u.components=Object.assign({ConversationNetwork:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIConversation/conversation-network/index")]).then(function(){return resolve(t("63d2"))}.bind(null,t)).catch(t.oe)},ConversationList:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIConversation/conversation-list/index")]).then(function(){return resolve(t("fe1d"))}.bind(null,t)).catch(t.oe)}},u.components);var c=u;n.default=c},"742b":function(e,n,t){"use strict";var o=t("d0a5"),r=t.n(o);r.a},"78f8":function(e,n,t){},"813e":function(e,n,t){"use strict";var o=t("78f8"),r=t.n(o);r.a},8731:function(e,n,t){"use strict";(function(e,n){var o=t("4ea4");t("823a"),t("4a2a");o(t("66fd"));var r=o(t("5547"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"88eb":function(e,n,t){"use strict";t.r(n);var o=t("f065"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},"8b80":function(e,n,t){"use strict";t.r(n);var o=t("717a"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},b40f:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},c31b:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("a6ed"),r=t("2ab0"),i={setup:function(e,n){var t=(0,r.ref)(!1),i=(0,r.ref)(!1),a=(0,r.ref)(!1);return o.TUIStore.watch(o.StoreName.GRP,{isShowCreateComponent:function(e){t.value=!!e},isShowManageComponent:function(e){i.value=!!e},isShowSelectComponent:function(e){a.value=!!e}}),{isShowCreateGroup:t,isShowManageGroup:i,isShowSelectMember:a}}};i.components=Object.assign({CreateGroup:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIGroup/create-group/index")]).then(function(){return resolve(t("5105"))}.bind(null,t)).catch(t.oe)},ManageGroup:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIGroup/manage-group/index")]).then(function(){return resolve(t("8c99"))}.bind(null,t)).catch(t.oe)},SelectMember:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIGroup/select-member/index")]).then(function(){return resolve(t("22c0"))}.bind(null,t)).catch(t.oe)}},i.components);var a=i;n.default=a},c7b9:function(e,n,t){"use strict";t.r(n);var o=t("1d1d"),r=t("35ea");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("c59a");var a=t("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"be8b361c",null,!1,o["a"],void 0);n["default"]=u.exports},ca4d:function(e,n,t){"use strict";t.r(n);var o=t("c31b"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},d0a5:function(e,n,t){},dbd5:function(e,n,t){"use strict";t.r(n);var o=t("3f14"),r=t("88eb");for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("742b");var a=t("f0c5"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,"65a060a7",null,!1,o["a"],void 0);n["default"]=u.exports},f065:function(e,n,t){"use strict";var o=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("7037")),i=t("a6ed"),a=t("2ab0"),u=t("d31c"),c=t("8e85"),l={};l.props={displayType:{type:String,default:"contactList",require:!1}},l.setup=function(e,n){var t=n.emit,o=e,l=(0,a.ref)(o.displayType||"contactList"),s=(0,a.ref)(!1),f=(0,a.ref)(!0),d=(0,a.ref)(!0),v=(0,a.ref)(!0);(0,a.watchEffect)((function(){f.value="selectFriend"!==(null===o||void 0===o?void 0:o.displayType)})),i.TUIStore.watch(i.StoreName.CUSTOM,{isShowSelectFriendComponent:function(e){if(!u.isUniFrameWork&&"selectFriend"===(null===o||void 0===o?void 0:o.displayType))return s.value=e,void(f.value=!1);e?(s.value=!0,u.isUniFrameWork&&(l.value="selectFriend",null===c.TUIGlobal||void 0===c.TUIGlobal||c.TUIGlobal.hideTabBar())):(s.value=!1,u.isUniFrameWork&&(l.value=o.displayType,null===c.TUIGlobal||void 0===c.TUIGlobal||c.TUIGlobal.showTabBar()))},currentContactInfo:function(e){var n;u.isPC?(d.value=!0,v.value=!0):!e||"object"!==(0,r.default)(e)||(null===(n=Object.keys(e))||void 0===n?void 0:n.length)<=0?(d.value=!0,v.value=!1):(d.value=!1,v.value=!0)}});return{isPC:u.isPC,isShowSelectFriend:s,isShowContactList:f,isShowContactListInH5:d,isShowContactInfoInH5:v,switchConversation:function(e){u.isUniFrameWork&&(null===c.TUIGlobal||void 0===c.TUIGlobal||c.TUIGlobal.navigateTo({url:"/TUIKit/components/TUIChat/index"})),t("switchConversation",e)}}},l.components=Object.assign({SelectFriend:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/select-friend/index")]).then(function(){return resolve(t("ca06"))}.bind(null,t)).catch(t.oe)},ContactSearch:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/contact-search/index")]).then(function(){return resolve(t("3156"))}.bind(null,t)).catch(t.oe)},ContactList:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/contact-list/index")]).then(function(){return resolve(t("e25f"))}.bind(null,t)).catch(t.oe)},ContactInfo:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/contact-info/index")]).then(function(){return resolve(t("bce2"))}.bind(null,t)).catch(t.oe)}},l.components);var s=l;n.default=s},f56e:function(e,n,t){"use strict";t.r(n);var o=t("130f"),r=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=r.a},ff0d:function(e,n,t){"use strict";var o=t("0a39"),r=t.n(o);r.a}},[["8731","common/runtime","common/vendor"]]]);