require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sub-packages-user/my/add-file/index"],{"035d":function(e,n,t){"use strict";t.r(n);var o=t("4e93"),a=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},1003:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}));var o={uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,"6418"))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"c4b6"))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"3394"))},uniDatetimePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(t.bind(null,"3d59"))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,"e987"))}},a=function(){var e=this,n=e.$createElement,o=(e._self._c,t("3c00")),a=t("790b");e._isMounted||(e.e0=function(n){return e.$U.backPage(1)}),e.$mp.data=Object.assign({},{$root:{m0:o,m1:a}})},r=[]},"2b01":function(e,n,t){"use strict";var o=t("a08e"),a=t.n(o);a.a},"4e93":function(e,n,t){"use strict";(function(e){var o=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(t("2eee")),r=o(t("c973")),u={data:function(){return{statusBarHeight:25,baseFormData:{TreatmentDate:"",Remark:"",FilesUrl:"",Other:"",photo:[]},remotePhoto:[],nowDataStr:Date.now()}},created:function(){this.statusBarHeight=e.getSystemInfoSync().statusBarHeight+"px"},methods:{createHealthRecord:function(){var e=this;return(0,r.default)(a.default.mark((function n(){var t,o,r,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=e.baseFormData,o=t.TreatmentDate,r=t.Remark,t.FilesUrl,t.Other,u=t.photo,!e.$U.dateUtils.isEmpty(o)){n.next=4;break}return e.$U.checkTip("就诊日期不能为空！"),n.abrupt("return");case 4:if(!e.$U.dateUtils.isEmpty(r)){n.next=7;break}return e.$U.checkTip("信息备注不能为空！"),n.abrupt("return");case 7:if(0!==u.length){n.next=10;break}return e.$U.checkTip("图片或文件不能为空！"),n.abrupt("return");case 10:return n.next=12,e.uploadImg();case 12:e.remotePhoto.length>0&&(e.baseFormData.FilesUrl=e.remotePhoto.join("|")),delete e.baseFormData.photo,e.$H.post("/api/APP/WXUser/CreateHealthRecord",e.baseFormData,{},{show:!0}).then((function(n){200===n.Code&&e.$U.backPage(1)}));case 15:case"end":return n.stop()}}),n)})))()},uploadImg:function(){var n=this;return(0,r.default)(a.default.mark((function t(){var o,r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showLoading({title:"加载中"}),o=0;case 2:if(!(o<n.baseFormData.photo.length)){t.next=10;break}return t.next=5,n.$H.upload("/api/APP/WXUser/UploadFile",{filePath:n.baseFormData.photo[o],name:"upload",header:{"content-type":"multipart/form-data"}});case 5:r=t.sent,n.remotePhoto.push(r.Data);case 7:o++,t.next=2;break;case 10:e.hideLoading();case 11:case"end":return t.stop()}}),t)})))()},onnodeclick:function(e){console.log(e)},onpopupopened:function(e){console.log("popupopened")},onpopupclosed:function(e){console.log("popupclosed")},onchange:function(e){console.log("onchange:",e)},previewImg:function(n,t){e.previewImage({urls:n,current:n[t]})},chooseImage:function(n){var t=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){var n=e.tempFilePaths;t.baseFormData.photo.push(n[0])}})},delImage:function(e){this.baseFormData.photo.splice(e,1)}}};n.default=u}).call(this,t("543d")["default"])},"642f":function(e,n,t){"use strict";(function(e,n){var o=t("4ea4");t("823a"),t("4a2a");o(t("66fd"));var a=o(t("8ce2"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"6fa0":function(e,n,t){},"8ce2":function(e,n,t){"use strict";t.r(n);var o=t("1003"),a=t("035d");for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t("2b01"),t("e18b");var u=t("f0c5"),i=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"53959d88",null,!1,o["a"],void 0);n["default"]=i.exports},a08e:function(e,n,t){},e18b:function(e,n,t){"use strict";var o=t("6fa0"),a=t.n(o);a.a}},[["642f","common/runtime","common/vendor","pages/sub-packages-user/common/vendor"]]]);