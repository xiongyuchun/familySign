require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sub-packages-user/my/upload-info/index"],{"0a98":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("823a"),n("4a2a");a(n("66fd"));var r=a(n("5ded"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},3694:function(e,t,n){"use strict";var a=n("3bf0"),r=n.n(a);r.a},"3bf0":function(e,t,n){},"401e":function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("2eee")),i=a(n("c973")),o={components:{Region:function(){n.e("pages/login/components/city-select/index").then(function(){return resolve(n("6185"))}.bind(null,n)).catch(n.oe)}},data:function(){return{type:"",webUrl:"",statusBarHeight:25,baseFormData:{HeadImgUrl:"",Name:"",IDCard:"",introduction:"",Sex:1,MaritalStatus:0,PhoneNumber:"",Province:"",City:"",Area:"",Address:"",IDCardFrontUrl:"",IDCardBackUrl:""},HeadImgUrl:"",IDCardFrontUrl:"",IDCardBackUrl:"",regionStr:"",alignmentFormData:{Name:"",age:""},sexs:[{text:"男",value:1},{text:"女",value:2}],marrys:[{text:"是",value:0},{text:"否",value:1}],dataTree:[{text:"江西",value:"1-0",children:[{text:"南昌",value:"1-1"},{text:"九江",value:"1-2"}]},{text:"广东",value:"2-0",children:[{text:"深圳",value:"2-1"},{text:"广州",value:"2-2"}]}]}},created:function(){this.statusBarHeight=e.getSystemInfoSync().statusBarHeight+"px",this.webUrl=this.$C.webUrl},onLoad:function(e){this.type=e.type,"info"===e.type&&this.getUserInfo()},methods:{regionClick:function(e){this.baseFormData.Province=e[0],this.baseFormData.City=e[1],this.baseFormData.Area=e[2],this.baseFormData.Address=e[3],this.regionStr=e[0]+e[1]+e[2]+e[3]},getUserInfo:function(){var e=this;this.$H.get("/api/APP/WXUser/GetUserInfo").then((function(t){if(t.Data){var n=t.Data,a=n.Province,r=n.City,i=n.Area,o=n.Address;e.baseFormData=t.Data,a&&(e.regionStr=a+r+i+o)}})).catch((function(e){console.log("err:",e)}))},submit:function(){var t=this;return(0,i.default)(r.default.mark((function n(){var a,i,o,u,s,c,l,d,f;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.baseFormData,i=a.HeadImgUrl,o=a.Name,u=a.IDCard,a.introduction,a.Sex,s=a.PhoneNumber,c=a.City,l=a.IDCardFrontUrl,d=a.IDCardBackUrl,!t.$U.dateUtils.isEmpty(i)){n.next=4;break}return t.$U.checkTip("请上传头像！"),n.abrupt("return");case 4:if(!t.$U.dateUtils.isEmpty(o)){n.next=7;break}return t.$U.checkTip("姓名不能为空！"),n.abrupt("return");case 7:if(!t.$U.dateUtils.isEmpty(u)){n.next=10;break}return t.$U.checkTip("身份证号不能为空！"),n.abrupt("return");case 10:if(t.$U.dateUtils.isIDcard(u)){n.next=13;break}return t.$U.checkTip("身份证号格式错误！"),n.abrupt("return");case 13:if(!t.$U.dateUtils.isEmpty(s)){n.next=16;break}return t.$U.checkTip("手机号不能为空！"),n.abrupt("return");case 16:if(t.$U.dateUtils.isTel(s)){n.next=19;break}return t.$U.checkTip("手机号格式错误！"),n.abrupt("return");case 19:if(!t.$U.dateUtils.isEmpty(c)){n.next=22;break}return t.$U.checkTip("居住地不能为空！"),n.abrupt("return");case 22:if(!t.$U.dateUtils.isEmpty(l)){n.next=25;break}return t.$U.checkTip("身份证正面不能为空！"),n.abrupt("return");case 25:if(!t.$U.dateUtils.isEmpty(d)){n.next=28;break}return t.$U.checkTip("身份证反面不能为空！"),n.abrupt("return");case 28:f="info"===t.type?"/api/APP/WXUser/Edit":"/api/APP/WXUser/Create",t.$H.post(f,t.baseFormData).then((function(n){200===n.Code&&(e.showToast({title:n.Message,icon:"none"}),t.$U.gotoPageTab("/pages/index/index"),t.$store.dispatch("user/setUserInfo",t.baseFormData))}));case 30:case"end":return n.stop()}}),n)})))()},onnodeclick:function(e){console.log(e)},onpopupopened:function(e){console.log("popupopened")},onpopupclosed:function(e){console.log("popupclosed")},onchange:function(e){console.log("onchange:",e)},uploadImg:function(e){var t=this;return(0,i.default)(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$H.upload("/api/APP/WXUser/UploadFile",{filePath:e.val,name:"upload",header:{"content-type":"multipart/form-data"}});case 2:a=n.sent,t.baseFormData[e.key]=a.Data;case 4:case"end":return n.stop()}}),n)})))()},chooseImage:function(t){var n=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){var a=e.tempFilePaths[0];switch(t){case"HeadImgUrl":n.uploadImg({key:"HeadImgUrl",val:a});break;case"IDCardFrontUrl":n.uploadImg({key:"IDCardFrontUrl",val:a});break;case"IDCardBackUrl":n.uploadImg({key:"IDCardBackUrl",val:a});break;default:break}}})}}};t.default=o}).call(this,n("543d")["default"])},"5ded":function(e,t,n){"use strict";n.r(t);var a=n("7300"),r=n("6422");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("b0a6"),n("3694");var o=n("f0c5"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"406fafae",null,!1,a["a"],void 0);t["default"]=u.exports},6422:function(e,t,n){"use strict";n.r(t);var a=n("401e"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"6a55":function(e,t,n){},7300:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"6418"))},uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"c4b6"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"3394"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"e987"))},uniDataCheckbox:function(){return n.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox").then(n.bind(null,"f862"))}},r=function(){var e=this,t=e.$createElement,a=(e._self._c,n("3c00")),r=e.baseFormData.IDCardFrontUrl?null:n("eebe"),i=e.baseFormData.IDCardBackUrl?null:n("22cb");e._isMounted||(e.e0=function(t){return e.$U.backPage(1)}),e.$mp.data=Object.assign({},{$root:{m0:a,m1:r,m2:i}})},i=[]},b0a6:function(e,t,n){"use strict";var a=n("6a55"),r=n.n(a);r.a}},[["0a98","common/runtime","common/vendor","pages/sub-packages-user/common/vendor"]]]);