require('../../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["TUIKit/components/TUIChat/message-input/message-input-audio"],{"260c":function(e,n,a){},"4f98":function(e,n,a){"use strict";a.r(n);var l=a("5d7e"),o=a("8d98");for(var u in o)["default"].indexOf(u)<0&&function(e){a.d(n,e,(function(){return o[e]}))}(u);a("9cfb");var t=a("f0c5"),i=Object(t["a"])(o["default"],l["b"],l["c"],!1,null,"fc5c08a4",null,!1,l["a"],void 0);n["default"]=i.exports},"5d7e":function(e,n,a){"use strict";a.d(n,"b",(function(){return l})),a.d(n,"c",(function(){return o})),a.d(n,"a",(function(){}));var l=function(){var e=this.$createElement;this._self._c},o=[]},"8d98":function(e,n,a){"use strict";a.r(n);var l=a("c474"),o=a.n(l);for(var u in l)["default"].indexOf(u)<0&&function(e){a.d(n,e,(function(){return l[e]}))}(u);n["default"]=o.a},"9cfb":function(e,n,a){"use strict";var l=a("260c"),o=a.n(l);o.a},c474:function(e,n,a){"use strict";var l=a("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a("2ab0"),u=a("a6ed"),t=a("d31c"),i=a("8e85"),r=a("6ef6"),c=l(a("1f6a")),v={};v.props={isAudioMainShow:{type:Boolean,default:!1}},v.setup=function(e,n){var a=e,l=n.emit,v=(0,o.ref)(!1),d=null===i.TUIGlobal||void 0===i.TUIGlobal?void 0:i.TUIGlobal.getRecorderManager(),f=(0,o.ref)(!1),s=(0,o.ref)(!1),p=(0,o.ref)(),h=(0,o.ref)("按住说话"),T=(0,o.ref)(),b=(0,o.ref)(),I=(0,o.ref)(null),g=(0,o.ref)();u.TUIStore.watch(u.StoreName.CONV,{currentConversation:function(e){g.value=e}});(0,o.onMounted)((function(){d.onStop((function(e){clearInterval(I.value);var n={duration:e.duration?e.duration:1e3*b.value,tempFilePath:e.tempFilePath,fileSize:e.fileSize?e.fileSize:48*b.value/8*1024};if(null===i.TUIGlobal||void 0===i.TUIGlobal||i.TUIGlobal.hideLoading(),p.value)if(n.duration<1e3)null===i.TUIGlobal||void 0===i.TUIGlobal||i.TUIGlobal.showToast({title:"录音时间太短",icon:"none"});else{var a,l,o,t,c,v={to:(null===g||void 0===g||null===(a=g.value)||void 0===a||null===(l=a.groupProfile)||void 0===l?void 0:l.groupID)||(null===g||void 0===g||null===(o=g.value)||void 0===o||null===(t=o.userProfile)||void 0===t?void 0:t.userID),conversationType:null===g||void 0===g||null===(c=g.value)||void 0===c?void 0:c.type,payload:{file:n},needReadReceipt:(0,r.isEnabledMessageReadReceiptGlobal)()};null===u.TUIChatService||void 0===u.TUIChatService||u.TUIChatService.sendAudioMessage(v)}f.value=!1,s.value=!1,p.value=!0,T.value=" ",h.value="按住说话"}))}));return{isH5:t.isH5,isWeChat:t.isWeChat,isApp:t.isApp,audio:c.default,props:a,popupToggle:f,textValue:h,title:T,switchAudio:function(){v.value=!v.value,l("switchAudio",v.value)},handleLongPress:function(e){f.value=!0,d.start({duration:6e4,sampleRate:44100,numberOfChannels:1,encodeBitRate:192e3,format:"mp3"}),T.value="正在录音",s.value=!0,b.value=0,I.value=setInterval((function(){b.value++}),1e3)},handleTouchMove:function(e){s.value&&(e.currentTarget.offsetTop-e.changedTouches[e.changedTouches.length-1].clientY>100?(h.value="抬起停止",T.value="松开手指，取消发送",p.value=!1):e.currentTarget.offsetTop-e.changedTouches[e.changedTouches.length-1].clientY>20?(h.value="抬起停止",T.value="上划可取消",p.value=!0):(h.value="抬起停止",T.value="正在录音",p.value=!0))},handleTouchEnd:function(){s.value=!1,f.value=!1,h.value="按住说话",null===i.TUIGlobal||void 0===i.TUIGlobal||i.TUIGlobal.hideLoading(),d.stop()}}},v.components=Object.assign({Icon:function(){a.e("TUIKit/components/common/Icon").then(function(){return resolve(a("b42b"))}.bind(null,a)).catch(a.oe)}},v.components);var d=v;n.default=d}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'TUIKit/components/TUIChat/message-input/message-input-audio-create-component',
    {
        'TUIKit/components/TUIChat/message-input/message-input-audio-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("4f98"))
        })
    },
    [['TUIKit/components/TUIChat/message-input/message-input-audio-create-component']]
]);
