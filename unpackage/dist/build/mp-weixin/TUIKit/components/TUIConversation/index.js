require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["TUIKit/components/TUIConversation/index"],{"0443":function(e,n,t){"use strict";t.r(n);var o=t("0479"),r=t("f56e");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("a493");var i=t("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"1e7694b5",null,!1,o["a"],void 0);n["default"]=c.exports},"0479":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement,n=(this._self._c,this.currentConversationID?this.TUITranslateService.t("TUIChat.您已被管理员禁言"):null),t=this.currentConversationID?this.TUITranslateService.t("TUIChat.请输入消息"):null;this.$mp.data=Object.assign({},{$root:{g0:n,g1:t}})},r=[]},"072c":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("2ab0"),r=t("a6ed"),a=t("be0f"),i=t("b2e8"),c=t("d31c"),u={};u.props={searchType:{key:"searchType",required:!1,type:null,default:function(){return c.isUniFrameWork?"conversation":"global"}}},u.setup=function(e,n){var t=e,u=(0,o.ref)(),l=(0,o.ref)(""),s=(0,o.ref)(!1),d=(0,o.ref)(!!c.isUniFrameWork),f=(0,o.computed)((function(){return!c.isPC&&("global"===t.searchType&&s.value||"conversation"===t.searchType&&d.value)})),v=function(e){r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchInputValue",{value:"",searchType:e}),r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchMessageType",{value:a.searchMessageTypeDefault[e],searchType:e}),r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchMessageTime",{value:i.searchMessageTimeDefault,searchType:e})};function h(){r.TUIStore.update(r.StoreName.CUSTOM,"isShowInConversationSearch",!1)}(0,o.onMounted)((function(){["global","conversation"].forEach((function(e){v(e)})),r.TUIStore.watch(r.StoreName.CONV,{currentConversationID:function(e){c.isUniFrameWork||l.value===e||h(),l.value=e}}),r.TUIStore.watch(r.StoreName.CUSTOM,{currentSearchingStatus:function(e){(null===e||void 0===e?void 0:e.searchType)===t.searchType&&(s.value=null===e||void 0===e?void 0:e.isSearching,"global"===(null===e||void 0===e?void 0:e.searchType)&&u.value&&(null!==e&&void 0!==e&&e.isSearching?p(u.value):I(u.value)))},isShowInConversationSearch:function(e){d.value=!!e,d.value&&v(t.searchType)}})})),(0,o.onBeforeUnmount)((function(){I(null===u||void 0===u?void 0:u.value)}));var m=!1,T=!1,p=function(e){!c.isUniFrameWork&&c.isPC&&(document.addEventListener("click",U),(null===e||void 0===e?void 0:e.addEventListener)&&(null===e||void 0===e||e.addEventListener("click",b)))},I=function(e){!c.isUniFrameWork&&c.isPC&&(document.removeEventListener("click",U),(null===e||void 0===e?void 0:e.removeEventListener)&&(null===e||void 0===e||e.removeEventListener("click",b)))},U=function(){m=!0,!T&&m&&(r.TUIStore.update(r.StoreName.CUSTOM,"currentSearchingStatus",{isSearching:!1,searchType:t.searchType}),I(null===u||void 0===u?void 0:u.value)),m=!1,T=!1},b=function(){T=!0};return{isPC:c.isPC,globalSearchRef:u,searchingStatus:s,isShowInConversationSearch:d,isFullScreen:f,closeInConversationSearch:h}},u.components=Object.assign({SearchInput:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-input/index")]).then(function(){return resolve(t("9607"))}.bind(null,t)).catch(t.oe)},SearchMore:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-more/index")]).then(function(){return resolve(t("7b75"))}.bind(null,t)).catch(t.oe)},SearchContainer:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-container/index")]).then(function(){return resolve(t("40a5"))}.bind(null,t)).catch(t.oe)},SearchResult:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUISearch/search-result/index")]).then(function(){return resolve(t("eef1"))}.bind(null,t)).catch(t.oe)}},u.components);var l=u;n.default=l},"0a39":function(e,n,t){},"130f":function(e,n,t){"use strict";var o=t("4ea4"),r=t("7037");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=d(t("a6ed")),i=d(t("e16a")),c=t("2ab0"),u=t("d31c"),l=o(t("0f88"));function s(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:n})(e)}function d(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=s(n);if(t&&t.has(e))return t.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}var f={setup:function(e,n){var t=n.emit,o=(0,c.ref)(!u.isUniFrameWork),r=(0,c.ref)(),s=(0,c.ref)(),d=(0,c.ref)(!1),f=(0,c.ref)(""),v=(0,c.ref)(void 0);a.TUIStore.watch(a.StoreName.CONV,{currentConversation:function(e){var n,t;if(s.value!==(null===e||void 0===e?void 0:e.conversationID)){if(l.default.setChatType(null===e||void 0===e?void 0:e.type),i.default.callService({serviceName:i.TUIConstants.TUICustomerServicePlugin.SERVICE.NAME,method:i.TUIConstants.TUICustomerServicePlugin.SERVICE.METHOD.ACTIVE_CONVERSATION,params:{conversationID:null===e||void 0===e?void 0:e.conversationID}}),s.value=null===e||void 0===e?void 0:e.conversationID,d.value=(null===e||void 0===e?void 0:e.type)===a.default.TYPES.CONV_GROUP,u.isUniFrameWork&&d.value&&f.value!==(null===e||void 0===e||null===(n=e.groupProfile)||void 0===n?void 0:n.groupID)){var o=i.default.getExtensionList(i.TUIConstants.TUIChat.EXTENSION.CHAT_HEADER.EXT_ID,{filterManageGroup:!d.value});v.value=o[0]}u.isUniFrameWork&&!d.value&&(v.value=[]),f.value=null===e||void 0===e||null===(t=e.groupProfile)||void 0===t?void 0:t.groupID}}}),(0,c.onUnmounted)((function(){h()}));var h=function(){a.TUIConversationService.switchConversation()};return{TUITranslateService:a.TUITranslateService,isPC:u.isPC,isWeChat:u.isWeChat,isUniFrameWork:u.isUniFrameWork,isToolbarShow:o,messageInputRef:r,currentConversationID:s,isGroup:d,groupID:f,groupManageExt:v,closeChat:function(e){t("closeChat",e),h()},insertEmoji:function(e){var n;null===r||void 0===r||null===(n=r.value)||void 0===n||n.insertEmoji(e)},handleToolbarListShow:function(e){u.isUniFrameWork?o.value=void 0===e?!o.value:e:o.value=!0},handleEditor:function(e,n){var t;if(e&&n)switch(n){case"reference":break;case"reply":break;case"reedit":var o,a;if(null!==e&&void 0!==e&&null!==(t=e.payload)&&void 0!==t&&t.text)null===r||void 0===r||null===(o=r.value)||void 0===o||o.reEdit(null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.text);break;default:break}},handleGroup:function(){v.value.listener.onClicked({groupID:f.value})}}}};f.components=Object.assign({ChatHeader:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/components/TUIChat/chat-header/index")]).then(function(){return resolve(t("59ca"))}.bind(null,t)).catch(t.oe)},Forward:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIChat/forward/index")]).then(function(){return resolve(t("8492"))}.bind(null,t)).catch(t.oe)},MessageList:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIChat/message-list/index")]).then(function(){return resolve(t("309f"))}.bind(null,t)).catch(t.oe)},MessageInputToolbar:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/components/TUIChat/message-input-toolbar/index")]).then(function(){return resolve(t("9aff"))}.bind(null,t)).catch(t.oe)},MessageInput:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIChat/message-input/index")]).then(function(){return resolve(t("4e72"))}.bind(null,t)).catch(t.oe)}},f.components);var v=f;n.default=v},"1d1d":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},"23da":function(e,n,t){"use strict";t.r(n);var o=t("51b0"),r=t("ca4d");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("ff0d");var i=t("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"533de489",null,!1,o["a"],void 0);n["default"]=c.exports},"35ea":function(e,n,t){"use strict";t.r(n);var o=t("072c"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},"3f14":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},"45d9":function(e,n,t){"use strict";t.r(n);var o=t("7118"),r=t("8b80");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("a460");var i=t("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"e77f70cc",null,!1,o["a"],void 0);n["default"]=c.exports},"4dcd":function(e,n,t){"use strict";(function(e,n){var o=t("4ea4");t("823a"),t("4a2a");o(t("66fd"));var r=o(t("45d9"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"51b0":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},7118:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},r=[]},"717a":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("405a");var o=t("a6ed"),r=t("2ab0"),a=t("8e85"),i=t("e6e8"),c={setup:function(e,n){var t=n.emit,c=(0,r.ref)(0),u=(0,r.ref)(),l=(0,r.ref)(),s=(0,r.ref)(0),d=(0,r.ref)(0),f=(0,r.ref)(!0);o.TUIStore.watch(o.StoreName.CONV,{totalUnreadCount:function(e){c.value=e}}),o.TUIStore.watch(o.StoreName.CUSTOM,{isShowConversationHeader:function(e){f.value=!1!==e}});var v=function(){var e,n;null===u||void 0===u||null===(e=u.value)||void 0===e||e.closeChildren(),null===l||void 0===l||null===(n=l.value)||void 0===n||n.closeChildren()};(0,i.onHide)(v);return{conversationListDomRef:l,handleSwitchConversation:function(e){null===a.TUIGlobal||void 0===a.TUIGlobal||a.TUIGlobal.navigateTo({url:"/TUIKit/components/TUIChat/index"}),t("handleSwitchConversation",e)},handleClickConv:function(){v()},handleTouchStart:function(e){s.value=e.changedTouches[0].clientX,d.value=e.changedTouches[0].clientY},handleTouchEnd:function(e){var n=e.changedTouches[0].clientX,t=e.changedTouches[0].clientY,o="";n-s.value>50&&Math.abs(t-d.value)<50?o="right":n-s.value<-50&&Math.abs(t-d.value)<50&&(o="left"),t-d.value>50&&Math.abs(n-s.value)<50?o="down":t-d.value<-50&&Math.abs(n-s.value)<50&&(o="up"),"down"!==o&&"up"!==o||v()},getPassingRef:function(e){e.value=l.value}}}};c.components=Object.assign({ConversationNetwork:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIConversation/conversation-network/index")]).then(function(){return resolve(t("63d2"))}.bind(null,t)).catch(t.oe)},ConversationList:function(){Promise.all([t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIConversation/conversation-list/index")]).then(function(){return resolve(t("fe1d"))}.bind(null,t)).catch(t.oe)}},c.components);var u=c;n.default=u},"742b":function(e,n,t){"use strict";var o=t("d0a5"),r=t.n(o);r.a},"88eb":function(e,n,t){"use strict";t.r(n);var o=t("f065"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},"8b80":function(e,n,t){"use strict";t.r(n);var o=t("717a"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},c31b:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("a6ed"),r=t("2ab0"),a={setup:function(e,n){var t=(0,r.ref)(!1),a=(0,r.ref)(!1),i=(0,r.ref)(!1);return o.TUIStore.watch(o.StoreName.GRP,{isShowCreateComponent:function(e){t.value=!!e},isShowManageComponent:function(e){a.value=!!e},isShowSelectComponent:function(e){i.value=!!e}}),{isShowCreateGroup:t,isShowManageGroup:a,isShowSelectMember:i}}};a.components=Object.assign({CreateGroup:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIGroup/create-group/index")]).then(function(){return resolve(t("5105"))}.bind(null,t)).catch(t.oe)},ManageGroup:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIGroup/manage-group/index")]).then(function(){return resolve(t("8c99"))}.bind(null,t)).catch(t.oe)},SelectMember:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIGroup/select-member/index")]).then(function(){return resolve(t("22c0"))}.bind(null,t)).catch(t.oe)}},a.components);var i=a;n.default=i},c7b9:function(e,n,t){"use strict";t.r(n);var o=t("1d1d"),r=t("35ea");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("c59a");var i=t("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"be8b361c",null,!1,o["a"],void 0);n["default"]=c.exports},ca4d:function(e,n,t){"use strict";t.r(n);var o=t("c31b"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},d0a5:function(e,n,t){},dbd5:function(e,n,t){"use strict";t.r(n);var o=t("3f14"),r=t("88eb");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("742b");var i=t("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"65a060a7",null,!1,o["a"],void 0);n["default"]=c.exports},f065:function(e,n,t){"use strict";var o=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("7037")),a=t("a6ed"),i=t("2ab0"),c=t("d31c"),u=t("8e85"),l={};l.props={displayType:{type:String,default:"contactList",require:!1}},l.setup=function(e,n){var t=n.emit,o=e,l=(0,i.ref)(o.displayType||"contactList"),s=(0,i.ref)(!1),d=(0,i.ref)(!0),f=(0,i.ref)(!0),v=(0,i.ref)(!0);(0,i.watchEffect)((function(){d.value="selectFriend"!==(null===o||void 0===o?void 0:o.displayType)})),a.TUIStore.watch(a.StoreName.CUSTOM,{isShowSelectFriendComponent:function(e){if(!c.isUniFrameWork&&"selectFriend"===(null===o||void 0===o?void 0:o.displayType))return s.value=e,void(d.value=!1);e?(s.value=!0,c.isUniFrameWork&&(l.value="selectFriend",null===u.TUIGlobal||void 0===u.TUIGlobal||u.TUIGlobal.hideTabBar())):(s.value=!1,c.isUniFrameWork&&(l.value=o.displayType,null===u.TUIGlobal||void 0===u.TUIGlobal||u.TUIGlobal.showTabBar()))},currentContactInfo:function(e){var n;c.isPC?(f.value=!0,v.value=!0):!e||"object"!==(0,r.default)(e)||(null===(n=Object.keys(e))||void 0===n?void 0:n.length)<=0?(f.value=!0,v.value=!1):(f.value=!1,v.value=!0)}});return{isPC:c.isPC,isShowSelectFriend:s,isShowContactList:d,isShowContactListInH5:f,isShowContactInfoInH5:v,switchConversation:function(e){c.isUniFrameWork&&(null===u.TUIGlobal||void 0===u.TUIGlobal||u.TUIGlobal.navigateTo({url:"/TUIKit/components/TUIChat/index"})),t("switchConversation",e)}}},l.components=Object.assign({SelectFriend:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/select-friend/index")]).then(function(){return resolve(t("ca06"))}.bind(null,t)).catch(t.oe)},ContactSearch:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/contact-search/index")]).then(function(){return resolve(t("3156"))}.bind(null,t)).catch(t.oe)},ContactList:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/contact-list/index")]).then(function(){return resolve(t("e25f"))}.bind(null,t)).catch(t.oe)},ContactInfo:function(){Promise.all([t.e("common/vendor"),t.e("TUIKit/common/vendor"),t.e("TUIKit/components/TUIContact/contact-info/index")]).then(function(){return resolve(t("bce2"))}.bind(null,t)).catch(t.oe)}},l.components);var s=l;n.default=s},f56e:function(e,n,t){"use strict";t.r(n);var o=t("130f"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},ff0d:function(e,n,t){"use strict";var o=t("0a39"),r=t.n(o);r.a}},[["4dcd","common/runtime","common/vendor"]]]);